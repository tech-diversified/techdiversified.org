<!DOCTYPE HTML>
<html>
<head>
    <title>Tech Diversified - Upcoming Events</title>
    <link rel="icon" type="image/ico" href="favicon.ico">
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <meta name="description" content=""/>
    <meta name="keywords" content=""/>
    <link rel="stylesheet" href="css/fonts.css"/>
    <link rel="stylesheet" href="css/static.css"/>
    <!--[if lte IE 8]>
    <script src="css/ie/html5shiv.js"></script><![endif]-->
    <script src="js/jquery.min.js"></script>
    <script src="js/mustache.js"></script>
    <script src="js/jquery.poptrox.min.js"></script>
    <script src="js/skel.min.js"></script>
    <script src="js/static-pages.js"></script>
    <noscript>
        <link rel="stylesheet" href="css/skel-noscript.css"/>
        <link rel="stylesheet" href="css/style.css"/>
    </noscript>

    <!--[if lte IE 8]>
    <link rel="stylesheet" href="css/ie/v8.css"/><![endif]-->
</head>
<body>

<div class="expando">

<!-- Nav -->
<nav id="nav">
    <!-- Logo -->
    <h1 id="logo"><a href="http://techdiversified.org"><img src="images/td_logo_hires.png"/><span class="logo_text">tech diversified</span></a>
    </h1>

    <div id="headerMenuToggle" class="threeLines" style="float:right" class="clearfix">
        <div class="horizontal-bar"></div>
        <div class="horizontal-bar"></div>
        <div class="horizontal-bar"></div>
    </div>
    <ul id="headerItems">
    </ul>
</nav>

<div id="rightSideBar">
    <div id="sideBarToggle" class="threeLines" style="float:right" class="clearfix">
        <div class="horizontal-bar"></div>
        <div class="horizontal-bar"></div>
        <div class="horizontal-bar"></div>
    </div>

    <ul id="right-nav-menu">

    </ul>
</div>

<!-- Main -->
<section id="staticWrapper" class="main">
    <div class="static-inner width-restriction">
        <header>
            <h2>Upcoming Events</h2>
        </header>
        <div class="content clearfix">
            <div class="textBlock">
                <p>
                    Tech Diversified is a Seattle-based nonprofit program striving to improve representation in the tech industry for African Americans, Latino Americans and Native Americans.  We provide adults (18+) with free resources such as technical workshops, career counseling, one-on-one mentoring and networking <a href="http://www.meetup.com/Tech-Diversified" target="_blank">meetups</a>.
                </p>
            </div>
            <div class="textBlock">
                <table id="eventList" style="width:auto;">

                </table>
            </div>
        </div>
    </div>
</section>
</div>

<!-- Footer -->
<footer id="footer">

    <!--
         Social Icons

         Use anything from here: http://fortawesome.github.io/Font-Awesome/cheatsheet/)
    -->
    <ul id="footerItems" class="actions">
    </ul>

    <!-- Menu -->
    <ul class="menu">
        <li>&copy; 2015 Tech Diversified. All Rights Reserved.</li>
    </ul>

</footer>

</body>
<script>
    $( document ).ready(function() {
        loadEventsFromMeetup();
        //loadEventsFromEventBrite();
    });


    function loadEventsFromMeetup() {

        //var url = 'https://api.meetup.com/2/events?&sign=true&photo-host=public&group_urlname=tech-diversified&page=20&key=5350685a4d783d675e4927440431a6c';
        var url = 'https://api.meetup.com/events?&sign=true&photo-host=public&group_urlname=tech-diversified&page=20&key=5350685a4d783d675e4927440431a6c';

        $.ajax({ url: url,
            crossDomain: true,
            jsonp: "callback",
            dataType: "jsonp"
        }).success(function(data) {
            if (data.results.length == 0) {
                $('#eventList').html("No upcoming workshops scheduled.  Contact us to recommend a topic!");
            }else{
                //Add date formatting functions here
                $.each(data.results, function(idx, item){
                    item.DateFormatter = function() {
                        return function(rawDate, render) {
                            var date = new Date(parseInt(render(rawDate)));
                            return (date.getMonth() + 1) + '/' + date.getDate() + '/' +  date.getFullYear() + ' ' +
                                    [(date.getHours() > 12 ? date.getHours() - 12 : date.getHours()),
                                        (date.getMinutes() == 0 ? "00" : date.getMinutes())
                                    ].join(':') + (date.getHours() > 12 ? " PM" : " AM");

                        }
                    }

                    if(!item.venue_name) item.venue_name = "Spatial Development International";

                });

                $.get('templates/eventList-Meetup.mst', function(template) {
                    var rendered = Mustache.render(template, data);
                    $('#eventList').html(rendered);
                });
            }
        });
    }

    function loadEventsFromEventBrite() {

        var url = 'https://www.eventbriteapi.com/v3/events/search/?organizer.id=6847174039&token=RBMNTBKGB43DVAWBZEOW';

        $.ajax({ url: url }).success(function(data) {
            if (data.events && data.events.length == 0) {

            }else{
                //Add date formatting functions here
                $.each(data.events, function(idx, item){
                    item.DateFormatter = function() {
                        return function(rawDate, render) {
                            var date = new Date(render($.trim(rawDate)));
                            return (date.getMonth() + 1) + '/' + date.getDate() + '/' +  date.getFullYear() + ' ' +
                                    [(date.getHours() > 12 ? date.getHours() - 12 : date.getHours()),
                                        (date.getMinutes() == 0 ? "00" : date.getMinutes())
                                    ].join(':') + (date.getHours() > 12 ? " PM" : " AM");

                        }
                    }
                });

                $.get('templates/eventList-EventBrite.mst', function(template) {
                    var rendered = Mustache.render(template, data);
                    $('#eventList').html(rendered);
                });
            }
        });
    }


</script>
<script>

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-54230721-1', 'auto');
    ga('send', 'pageview');

</script>
</html>